# Gather timeseries from Google Cloud Platform v3 monitoring API
[[inputs.stackdriver]]
  tagexclude = ["database_id","resource_type","project_id","region"]

  ## GCP Project
  project = "refined-ensign-355816"

  ## Include timeseries that start with the given metric type.
  metric_type_prefix_include = [
    "cloudsql.googleapis.com/database/cpu/",
    "cloudsql.googleapis.com/database/disk/",
    "cloudsql.googleapis.com/database/network/",
    "cloudsql.googleapis.com/database/memory/"
  ]

  ## Exclude timeseries that start with the given metric type.
  # metric_type_prefix_exclude = []

  ## Most metrics are updated no more than once per minute; it is recommended
  ## to override the agent level interval with a value of 1m or greater.
  interval = "1m"

  #cloudsql-psql-gkeprod-wod

  [[inputs.stackdriver.filter.resource_labels]]
    key = "database_id"
    value = "refined-ensign-355816:europe-southwest1:home-ops"

  [inputs.stackdriver.tags]
    host = "cloudsql-psql-gkeprod-home-ops"
# Rename measurements, tags, and fields that pass through this filter.
[[processors.rename]]
  [[processors.rename.replace]]
    measurement = "cloudsql.googleapis.com/database/cpu"
    dest = "cpu"
  [[processors.rename.replace]]
    measurement = "cloudsql.googleapis.com/database/disk"
    dest = "disk"
  [[processors.rename.replace]]
    measurement = "cloudsql.googleapis.com/database/network"
    dest = "network"
  [[processors.rename.replace]]
    measurement = "cloudsql.googleapis.com/database/memory"
    dest = "memory"
