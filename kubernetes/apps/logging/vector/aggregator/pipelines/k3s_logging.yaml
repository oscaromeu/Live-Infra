---
sources:

  k3s_logging_src:
    type: redis
    url: redis://redis-master.logging.svc.cluster.local:6379/0
    key: "k3s_prod:logging"

#transforms:
#
#  kubernetes_remap:
#    type: remap
#    inputs:
#      - kubernetes_source
#    source: |
#      # Standardize 'app' index
#      .app_name = .pod_labels."app.kubernetes.io/name" || .pod_labels.app || .pod_labels."k8s-app" || "unknown"


sinks:

  kubernetes:
    type: console
    encoding:
      codec: "text"
    inputs:
      - k3s_logging_src

  #kubernetes_elasticsearch:
  #  type: elasticsearch
  #  inputs:
  #    - k3s_logging_src
  #  auth:
  #    strategy: basic
  #    user: elastic
  #    password: ${ELASTIC_PASSWORD}
  #  index: "k3s_prod-logging-%Y.%m.%d"






