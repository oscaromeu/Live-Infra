apiVersion: apps/v1
kind: Deployment
metadata:
  name: flog-generator
  labels:
    app: flog-generator
spec:
  replicas: 1
  selector:
    matchLabels:
      app: flog-generator
  template:
    metadata:
      labels:
        app: flog-generator
    spec:
      containers:
      - name: flog-generator
        image: mingrammer/flog:0.4.3
        command: ["flog"]
        args: [
          "-f",
          "json",
          "-t",
          "stdout",
          "-d",
          "200ms",
          "-w",
          "-l",
          #"-o",
          #"/var/log/flog.log",
          "-b",
          "10485760",
          "-p",
          "1048576"
        ]
        #args: ["-f json -t log -d 200ms -w -l -o /var/log/flog.log -b 10485760 -p 10485760"]
        resources:
          limits:
            memory: 500Mi
          requests:
            cpu: 100m
            memory: 250Mi
        volumeMounts:
        - name: flog-log
          mountPath: /var/log/flog.log
      volumes:
      - name: flog-log
        hostPath:
          path: /var/log/flog.log
          type: FileOrCreate

      nodeSelector:
        kubernetes.io/arch: amd64
