---
apiVersion: elasticsearch.k8s.elastic.co/v1
kind: Elasticsearch
metadata:
  name: elk
  labels:
    app: elk
spec:
  version: 8.0.0
  nodeSets:
  - name: master
    count: 1
    config:
      node.roles: ["master", "remote_cluster_client"]
      node.store.allow_mmap: false
  - name: data
    count: 1
    config:
      node.roles: ["data"]
      node.store.allow_mmap: false
#  - name: ingest
#    count: 1
#    config:
#      node.roles: ["ingest"]
#      node.store.allow_mmap: false
#  - name: coordinating
#    count: 1
#    config:
#      node.roles: []
#      node.store.allow_mmap: false
#  - name: ml
#    count: 1
#    config:
#      node.roles: ["ml"]
#      node.store.allow_mmap: false
---
apiVersion: kibana.k8s.elastic.co/v1
kind: Kibana
metadata:
  name: elk
  labels:
    app: elk
spec:
  version: 8.0.0
  count: 1
  elasticsearchRef:
    name: elk
#---
#apiVersion: apm.k8s.elastic.co/v1
#kind: ApmServer
#metadata:
#  name: elk
#  labels:
#    app: elk
#spec:
#  version: 8.0.0
#  count: 1
#  elasticsearchRef:
#    name: elk
