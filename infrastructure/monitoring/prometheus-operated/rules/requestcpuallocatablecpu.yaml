apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  namespace: monitoring
  name: requestcpuallocatablecpu
spec:
  groups:
  - name: 
    rules:
    - alert: requestcpuallocatablecpu
      for: 1m
      expr: "(sum(kube_pod_container_resource_requests{resource=\"cpu\"})/sum(kube_node_status_allocatable{resource=\"\
        cpu\"})*100) > 10\n"
      labels:
        name: RequestCPUAllocatableCPU
        project: gkeop
        environment: nopro
        cluster: gkenopro
        severity: warning
      annotations:
        message: Esta saltando la alarma de prueba
        zabbix_data: '{"tags": {"ALERTERS": "opsgenie", "NOTIFICATION": "ZBXALERTER",
          "OPSGENIE_ENV": "ANTHOS_NOPROD", "OPSGENIE_PRIORITY": 3, "OPSGENIE_TEAM":
          "SRE_TEAM"}}'